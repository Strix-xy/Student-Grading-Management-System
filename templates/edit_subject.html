{% extends "base.html" %}

{% block title %}Edit Subject - Student Grading System{% endblock %}

{% block content %}
<div class="p-7">
  <div class="max-w-3xl mx-auto">
    <a href="{{ url_for('subjects') }}" class="inline-flex items-center text-secondary-gold hover:text-yellow-700 transition-colors mb-4">
      <i data-lucide="arrow-left" class="w-5 h-5 mr-2"></i>
      Back to Subjects
    </a>

    <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold mb-4">Edit Subject</h2>

      <form method="POST" action="{{ url_for('edit_subject', subject_id=subject.id) }}" class="grid grid-cols-1 gap-4">
        <div>
          <label class="text-sm font-medium">Subject Code</label>
          <input type="text" name="subject_code" value="{{ subject.subject_code }}" required class="w-full px-3 py-2 border rounded-lg" />
        </div>
        <div>
          <label class="text-sm font-medium">Subject Name</label>
          <input type="text" name="subject_name" value="{{ subject.subject_name }}" required class="w-full px-3 py-2 border rounded-lg" />
        </div>
        <div>
          <label class="text-sm font-medium">Units</label>
          <input type="number" name="units" value="{{ subject.units }}" class="w-full px-3 py-2 border rounded-lg" />
        </div>
        <div>
          <label class="text-sm font-medium">Education Level</label>
          <select name="education_level" class="w-full px-3 py-2 border rounded-lg">
            <option value="Primary" {% if subject.education_level == 'Primary' %}selected{% endif %}>Primary</option>
            <option value="Secondary" {% if subject.education_level == 'Secondary' %}selected{% endif %}>Secondary</option>
            <option value="Tertiary" {% if subject.education_level == 'Tertiary' %}selected{% endif %}>Tertiary</option>
          </select>
        </div>
        <div>
          <label class="text-sm font-medium">Academic Year (optional)</label>
          <select name="class_year" class="w-full px-3 py-2 border rounded-lg">
            <option value="">Select academic year</option>
            {% for y in range(2023,2031) %}
            <option value="{{ y }}-{{ y+1 }}" {% if subject.class_year == (y ~ '-' ~ (y+1)) %}selected{% endif %}>{{ y }}-{{ y+1 }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label class="text-sm font-medium">Description</label>
          <textarea name="description" class="w-full px-3 py-2 border rounded-lg">{{ subject.description }}</textarea>
        </div>

        <div class="mt-4 flex gap-3">
          <button type="submit" class="px-4 py-2 bg-secondary-gold text-white rounded-lg">Save Changes</button>
          <a href="{{ url_for('subjects') }}" class="px-4 py-2 bg-gray-100 rounded-lg">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
